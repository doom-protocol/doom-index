---
title: DOOM INDEX - プロダクト概要
includes: always
updated: 2025-11-22
---

## プロダクト概要

DOOM INDEX は、CoinGecko から取得したトレンドトークンの市場データを基に、毎時ユニークなジェネラティブアートを生成・提示するビジュアライゼーションプロダクトです。AI がトークンの市場心理を芸術として可視化し、生成画像は Cloudflare R2 に保存され、Web UI と OGP に活用されます。

## コア機能

- マーケットデータ連動画像生成（毎時）
- 動的 OGP 画像生成（OpenGraph 連携）
- 3D ギャラリー表示（React Three Fiber）
- **アーカイブページ** - 過去の生成作品を閲覧・検索可能なアーカイブ機能
- ストレージ永続化（Cloudflare R2／公開 URL 読み取り）
- **データベース統合（Cloudflare D1）** - アーカイブインデックス、トークン情報、市場スナップショット
- 動的トークン選択（CoinGecko トレンド API + 強制リスト対応）
- 画像生成プロバイダ切り替え（Runware／OpenAI／モック）
- **動的プロンプト生成（dynamic-prompt）** - Tavily Search + Workers AI によるトークン固有のナラティブコンテキスト生成
- 市場心理分析（Fear & Greed Index 統合）
- **型安全な API 通信（tRPC v11）** - エンドツーエンドの型安全性を実現
- CLI ツールによるローカル生成・検証（`scripts/generate.ts`）
- ローカル開発用のスケジュール実行・プレビュー（Workers Preview + Cron）
- **Cloudflare Cache API 統合（開発中）** - Edge キャッシュによるレイテンシ低減とコスト最適化

## 代表的なユースケース

- トレンドトークンの市場心理をアートとして可視化
- ソーシャル共有時の OGP を常に最新状態に維持
- **過去作品の閲覧・検索** - アーカイブページで日付範囲やパラメータで検索
- **トークン固有のコンテキスト生成** - dynamic-prompt による各トークンの象徴性・ナラティブの自動生成
- 実運用前のローカル検証（モック・固定トークン・特定モデルでの生成）
- 分析・展示向けのアーカイブ生成（`out/` または R2 への保存）

## 価値提案

- トレンドトークンの市場心理を即時にアートへ反映し、感情を視覚化
- エッジ実行と R2 による高速・安定配信
- **D1 データベースによる高速検索** - アーカイブの効率的なインデックス化とクエリ
- **AI によるコンテキスト生成** - Workers AI + Tavily でトークン固有のナラティブを自動生成
- 動的トークン選択により市場トレンドをリアルタイムに反映
- Provider 抽象化によりモデルや実行環境を柔軟に切替
- 型安全（TypeScript）と結果型（neverthrow）で堅牢なエラーハンドリング
- **tRPC によるエンドツーエンド型安全性** - 開発時の型補完と実行時エラー削減
- **Edge キャッシュによる最適化** - 外部 API 呼び出し削減と UX 向上

## 主要制約・前提

- 本番では Cloudflare Pages + Workers（Cron/Bindings）を前提
- 生成 Provider の API キー等は環境変数で供給（Secrets/Pages）
- ローカルは Bun 実行・Workers プレビューで近似挙動を再現
