# GLB Export 機能実装計画 (1st Round)

本実装計画は NFT ミント機能の最初のフェーズとして、GLB エクスポート機能に特化しています。
Mint ボタンを押した時に GLB がエクスポートできるところまでを実装し、NFT ミント機能との接続はおいておきます。

- [ ] 1. 環境セットアップと依存関係の追加
  - three-stdlib をインストールして GLTFExporter を利用可能にする
  - 型安全な環境変数検証を設定（必要最小限）
  - _Requirements: 1.1_

- [ ] 2. GLB エクスポートサービスの実装
  - FramedPainting から絵画モデル（frame.glb + webp テクスチャ）を抽出する機能を実装
  - GLTFExporter を使用してバイナリ GLB を生成
  - File オブジェクトとして返す機能を追加
  - バックグラウンドで非同期実行できるように設計
  - _Requirements: 1.1, 1.4_

- [ ] 3. GLB エクスポートの最適化ロジック実装
  - 生成された GLB が 32MB を超える場合のメッシュ簡略化を実装
  - WebP テクスチャ圧縮を適用してファイルサイズを削減
  - 最適化後のサイズ検証機能を追加
  - _Requirements: 1.1, 1.2_

- [ ] 4. Mint ボタン UI コンポーネントの実装
  - GLB エクスポートをトリガーするボタンコンポーネントを作成
  - エクスポート進行中のローディング状態を表示
  - エクスポート完了時のダウンロードまたは保存機能を追加
  - _Requirements: 1.1, 1.3_

- [ ] 5. ギャラリーシーンへの Mint ボタン統合
  - FramedPainting の近くに Mint ボタンを配置
  - クリック時に GLB エクスポートを開始
  - 現在の絵画情報を GLB エクスポートサービスに渡す
  - _Requirements: 1.1_

- [ ] 6. エラーハンドリングとリトライロジックの実装
  - GLB エクスポート失敗時のエラーメッセージを表示
  - リトライ機能を備えたエラーハンドリングを実装
  - ユーザーにとって分かりやすいエラー通知を提供
  - _Requirements: 1.2_

- [ ] 7. GLB エクスポート機能のユニットテスト実装
  - GLB エクスポート機能の正常系テストを作成
  - エラーケース（無効なシーン、メモリ不足等）をテスト
  - バックグラウンド実行のテストを実装
  - _Requirements: 1.1, 1.4_
